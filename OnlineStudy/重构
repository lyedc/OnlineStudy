对 注册逻辑进行重构  把相同的部分进行抽取 到最后执行

类视图的继承问题